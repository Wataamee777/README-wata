<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>液晶風表示</title>
<style>
  canvas { image-rendering: pixelated; }
</style>
</head>
<body>
<input type="file" id="fileInput">
<canvas id="canvas"></canvas>

<script>
const fileInput = document.getElementById("fileInput");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

fileInput.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const img = new Image();
    img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        // 必要ならここで1px単位で加工できる
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const data = imageData.data;

        for (let i = 0; i < data.length; i += 4) {
            let r = data[i];
            let g = data[i+1];
            let b = data[i+2];

            // ここで液晶風の加工も可能（例: 明るさ補正）
            // r = r * 1.0; g = g * 1.0; b = b * 1.0;

            data[i] = r;
            data[i+1] = g;
            data[i+2] = b;
            // data[i+3] = 255; アルファそのまま
        }

        ctx.putImageData(imageData, 0, 0);
    };
    img.src = URL.createObjectURL(file);
});
</script>
</body>
</html>
