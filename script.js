const darkModeToggle=document.getElementById('darkModeToggle');(function initTheme(){const savedTheme=localStorage.getItem('theme');if(savedTheme==='dark'){document.body.classList.add('dark')}else if(savedTheme==='light'){document.body.classList.remove('dark')}else{const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;if(prefersDark){document.body.classList.add('dark')}}})();darkModeToggle?.addEventListener('click',()=>{document.body.classList.toggle('dark');const theme=document.body.classList.contains('dark')?'dark':'light';localStorage.setItem('theme',theme)});const scrollBtn=document.getElementById('scrollTopBtn');window.addEventListener('scroll',()=>{scrollBtn.style.display=window.scrollY>200?'block':'none'});scrollBtn?.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'})});function loadJSON(id,url,formatter){fetch(url).then(res=>res.json()).then(data=>{const container=document.getElementById(id);data.forEach(item=>{const li=document.createElement('li');li.innerHTML=formatter(item);container.appendChild(li)})}).catch(e=>console.error(`${id} 読み込み失敗`,e))} loadJSON('sns-list','./sns.json',item=>`${item.emoji} <strong>${item.name}</strong>: <code>${item.value}</code> <button onclick="copy('${item.copy}')">コピー</button>`);loadJSON('site-list','./sites.json',item=>`🔗 <a href="${item.url}" target="_blank">${item.name}</a>`);loadJSON('news-list','./news.json',item=>`🗓️ ${item.date} - ${item.message}`);function copy(text){navigator.clipboard.writeText(text).then(()=>{alert('コピーしたよ！')})} function triggerEasterEgg(){const audio=new Audio('assets/youareanidiot.mp3');audio.play();alert('💥 YOU ARE AN IDIOT 💥')} window.triggerEasterEgg=triggerEasterEgg;const fadeElems=document.querySelectorAll('.fade-in-scroll');const fadeObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('fade-in-active')}})});fadeElems.forEach(elem=>fadeObserver.observe(elem));if('serviceWorker' in navigator){navigator.serviceWorker.register('./sw.js').then(reg=>console.log('✅ Service Worker 登録成功')).catch(err=>console.warn('❌ SW登録失敗',err))}
